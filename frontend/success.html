<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Habits Tracker</title>
</head>
<style>
    /* Global Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", sans-serif;
    }

    body {
      display: flex;
      min-height: 100vh;
      background: #fffaf3;
      color: #333;
    }

    /* Sidebar */
    .sidebar {
      width: 220px;
      background: #ffb84d;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    .sidebar .logo {
      /* font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      color: #fff; */
      border-radius: 10px;
    } 

    .sidebar-buttons {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 16rem;
    }

    .btn {
      background: #fff3e0;
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s;
    }

    .btn:hover {
      background: #ffe0b2;
    }

    .logout {
      background: #f44336;
      color: white;
    }

    .logout:hover {
      background: #d32f2f;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .topbar {
      display: none; /* Hide the original topbar */
    }

    .add-habit-btn {
      background: #ff8c42;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s;
    }

    .add-habit-btn:hover {
      background: #e67a35;
    }

    /* Main Green Section */
    .main-section {
      flex: 2.5;
      background: white;
      padding: 25px;
      border-radius: 12px;
      border: 4px solid #4CAF50;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 25px;
    }

    .green-topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 2px solid #f0f0f0;
    }

    .green-topbar h2 {
      font-size: 1.5rem;
      color: #333;
    }

    .top-buttons {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .notification-btn {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s;
    }

    .notification-btn:hover {
      background: #45a049;
    }

    .pdf-btn {
      background: #2196F3;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s;
    }

    .pdf-btn:hover {
      background: #1976D2;
    }

    /* Habits Section inside green box */
    .habits-section {
      flex-grow: 1;
    }

    .habits-section h3 {
      margin-bottom: 20px;
      color: #ff8c42;
      font-size: 1.3rem;
    }

    .habits-list {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .habit-card {
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 3px solid #FFD700;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .habit-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .habit-title {
      font-size: 1.2rem;
      margin-bottom: 8px;
      color: #333;
    }

    .habit-meta {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 8px;
    }

    .habit-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .habit-actions button {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s;
    }

    .done-btn {
      background: #4caf50;
      color: white;
    }

    .done-btn:hover {
      background: #45a049;
    }

    .minus-btn {
      background: #ff9800;
      color: white;
    }

    .minus-btn:hover {
      background: #f57c00;
    }

    .stopwatch-btn {
      background: #2196f3;
      color: white;
    }

    .stopwatch-btn:hover {
      background: #1976d2;
    }

    .reset-btn {
      background: #f44336;
      color: white;
    }

    .reset-btn:hover {
      background: #da190b;
    }

    .delete-btn {
      background: #9c27b0;
      color: white;
      font-size: 0.8rem;
    }

    .delete-btn:hover {
      background: #7b1fa2;
    }

    .minus-btn {
      background: #ff9800;
      color: white;
    }

    .minus-btn:hover {
      background: #f57c00;
    }

    .stopwatch-btn {
      background: #9c27b0;
      color: white;
    }

    .stopwatch-btn:hover {
      background: #7b1fa2;
    }

    .delete-btn {
      background: #f44336;
      color: white;
    }

    .delete-btn:hover {
      background: #d32f2f;
    }

    /* Right Panel - Blue Box */
    .right-panel {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 500px;
    }

    .summary-card {
      background: white;
      padding: 30px;
      border-radius: 12px;
      border: 4px solid #6366F1;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      text-align: center;
      width: 100%;
      max-width: 280px;
    }

    .summary-card h3 {
      margin-bottom: 20px;
      color: #6366F1;
      font-size: 1.3rem;
    }

    .summary-card p {
      margin-bottom: 8px;
      font-size: 1rem;
    }

    .summary-card span {
      font-weight: bold;
      color: #6366F1;
    }

    /* Progress Chart inside green box */
    .progress-chart {
      background: transparent;
      padding: 0;
      border-radius: 0;
      border: none;
      box-shadow: none;
      margin-top: 10px;
    }

    .progress-chart h3 {
      margin-bottom: 15px;
      color: #ff8c42;
      font-size: 1.2rem;
      text-align: center;
    }

    .chart-container {
      width: 100%;
      height: 250px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    canvas {
      width: 300px !important;
      height: 250px !important;
      max-width: 300px;
      max-height: 250px;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 12px;
      width: 400px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .modal-content h3 {
      margin-bottom: 20px;
      color: #ff8c42;
    }

    .modal-content input,
    .modal-content select {
      width: 100%;
      margin: 10px 0;
      padding: 12px;
      border-radius: 6px;
      border: 2px solid #ddd;
      font-size: 1rem;
    }

    .modal-content input:focus,
    .modal-content select:focus {
      outline: none;
      border-color: #ff8c42;
    }

    .modal-content button {
      margin: 10px 5px;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }

    #saveHabitBtn {
      background: #4caf50;
      color: white;
    }

    #saveHabitBtn:hover {
      background: #45a049;
    }

    .close-btn {
      background: #ddd;
      color: #333;
    }

    .close-btn:hover {
      background: #ccc;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .habits-list {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 900px) {
      .habits-list {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
      
      }
      
      .sidebar-buttons {
        flex-direction: row;
        margin-top: 0;
        gap: 10px;
      }
      
      .content-area {
        flex-direction: column;
      }

      .habits-list {
        grid-template-columns: 1fr;
      }
      
      .topbar {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      
      .modal-content {
        width: 90%;
        margin: 0 20px;
      }
    }
  </style>

<body>

  <!-- Sidebar -->
  <aside class="sidebar">
    <img src="./asset/main_logo.png" class="logo"></img>
    <div class="sidebar-buttons">
      <button class="btn">Dashboard</button>
      <button class="btn logout" onclick="logoutUser()">Logout</button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-area">
      <!-- Green Box - Main Section -->
      <section class="main-section">
        <div class="green-topbar">
          <h2 id="greeting"></h2>
          <div class="top-buttons">
            <button id="pdfReportBtn" class="pdf-btn">📄 Daily Report</button>
            <button id="addHabitBtn2" class="add-habit-btn">+ Add Habit</button>
          </div>
        </div>

        <!-- Your Habits -->
        <div class="habits-section">
          <h3>Your Habits</h3>
          <div id="habitsList" class="habits-list"></div>
        </div>

        <!-- Progress Chart -->
        <div class="progress-chart">
          <h3>Progress Chart</h3>
          <div class="chart-container">
            <canvas id="progressChart"></canvas>
          </div>
        </div>
      </section>

      <!-- Blue Box - Right Section -->
      <aside class="right-panel">
        <div class="summary-card">
          <h3>Today's Summary</h3>
          <p>Completed: <span id="completedCount">0</span></p>
          <p>Pending: <span id="pendingCount">0</span></p>
          <p>Total Streak: <span id="totalStreak">0</span></p>
        </div>
      </aside>
    </div>
  </main>

  <!-- Habit Modal -->
  <div id="habitModal" class="modal">
    <div class="modal-content">
      <h3>Add New Habit</h3>
      
      <!-- ✅ Habit type dropdown -->
      <label for="habitEmoji">Choose Habit</label>
      <select id="habitEmoji">
        <option value="📖">📖 Study</option>
        <option value="🏃">🏃 Exercise</option>
        <option value="🧘">🧘 Meditation</option>
        <option value="🍎">🍎 Diet</option>
        <option value="💻">💻 Coding</option>
        <option value="other">✏️ Other</option>
      </select>

      <!-- ✅ Hours input -->
      <label for="habitHours">Target Hours per Day</label>
      <input type="number" id="habitHours" placeholder="Hours per day" min="1">

      <!-- ✅ Custom habit name (hidden until “Other” is chosen) -->
      <input type="text" id="habitName" placeholder="Enter habit name" style="display: none;">

      <button id="saveHabitBtn">Save</button>
      <button id="closeHabitBtn" class="close-btn">Close</button>
    </div>
  </div>

    <!-- Scripts - Load in correct order -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="api.js"></script>
  <script src="proj.js"></script>

</body>
</html>
